<!DOCTYPE html>
<html>
<head>
    <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald">
<body>

<ink-article>

    <ink-var name="x" value="1"></ink-var>
    <ink-var name="y" value="5"></ink-var>
    <ink-var name="xSquared" :value="x * x" description="The square of x."></ink-var>

<h1>Ink Components</h1>
<p>
    The goal of <code>ink.js</code> is to provide a number of web-components for interactive scientific writing.
</p>
<h2>Why?</h2>
<p>
    The goal of <code>ink.js</code> is to make it easier to write interactive scientific writing.
</p>

<h2>Overview</h2>
<p>Check out the table of contents on the right, or scroll on:</p>
<dl>
  <dt><a href="#dynamic-content">Dynamic Content</a></dt><dd>Variables (e.g. $x=$ <ink-display name="x"></ink-display>) and ways to change them using inline components (e.g. <ink-range name="x"></ink-range> or <ink-dynamic name="x"></ink-dynamic>).</dd>
  <dt><a href="#text-content">Text Content</a></dt><dd>Equations, code, figures, asides, call-outs and more.</dd>
  <dt><a href="#charts">Charts</a></dt><dd>TODO</dd>
  <dt><a href="#extensions">Extensions</a></dt><dd>TODO</dd>
</dl>

<hr>

<h2>Getting started</h2>
<p>Ink is based on <a href="https://www.webcomponents.org/" target="_blank">web components</a>, which create custom HTML tags so that they can make writing documents easier. To get started, copy the built javascript file to the head of your page.</p>

<ink-code copy compact>
    &lt;script src="/path/to/ink.js"&gt;&lt;/script&gt;
</ink-code>

<ink-callout class="danger"><strong>Note:</strong> This should be installable through <code>npm</code></ink-callout>

<h2>Tangled Cookies</h2>

<ink-scope>

    <p><code>ink.js</code> is heavily inspired by <a href="http://worrydream.com/Tangle/guide.html">Tangle.js</a>, the goal is to allow you to write in html Web Components.</p>

    <ink-demo>
        <ink-var name="cookies" value="3" format=".4"></ink-var>
        <ink-var name="caloriesPerCookie" value="50"></ink-var>
        <ink-var name="dailyCalories" value="2100"></ink-var>

        <ink-var name="calories" :value="cookies * caloriesPerCookie" format=".0f"></ink-var>
        <ink-var name="dailyPercent" :value="calories / dailyCalories" format=".0%"></ink-var>

        <p>
            When you eat <ink-dynamic name="cookies" min="2" max="100"> cookies</ink-dynamic>,
            you consume <ink-display name="calories"></ink-display> calories.<br>
            That's <ink-display name="dailyPercent"></ink-display> of your recommended daily calories.
        </p>
    </ink-demo>

</ink-scope>


<hr>
<ink-scope>
    <h1>Taylor Series</h1>

    <p>
        The Taylor series of a real or complex-valued function $f(x)$ that is infinitely differentiable at a real or complex number $a$ is the power series
        <ink-equation>
            f(x) \approx f(a) + \frac {f'(a)}{1!} (x-a) + \frac{f''(a)}{2!} (x-a)^2 + \frac{f^{(3)}(a)}{3!}(x-a)^3 + \cdots
        </ink-equation>
        where $n!$ denotes the factorial of $n$ and $f^{(n)}(a)$ denotes the $n$th derivative of $f$ evaluated at the point $a$. In the more compact sigma notation, this can be written as
        <ink-equation>
            \sum _{n=0}^{\infty }{\frac {f^{(n)}(a)}{n!}}(x-a)^{n}.
        </ink-equation>
        The derivative of order zero of $f$ is defined to be $f$ itself and $(x - a)^0$ and $0!$ are both defined to be 1. When $a = 0$, the series is also called a Maclaurin series.
    </p>

    <ink-var name="ind" value="1"></ink-var>

    <p>
        The sine function is closely approximated by its Taylor polynomial of degree 7 for a full period centered at the origin.<br>
        Try expanding the Taylor series: <ink-range name="ind" min="1" max="5"></ink-range>.
        <ink-equation :math="[
            '\sin(x) \\approx x',
            '-{\\frac {x^{3}}{3!}}',
            '+{\\frac {x^{5}}{5!}}',
            '-{\\frac {x^{7}}{7!}}',
            '-{\\frac {x^{9}}{9!}}'
        ].slice(0, ind).join(' ') + ' + \\cdots'"></ink-equation>
    </p>

    <ink-chart :xlim="[-3 * Math.PI, 3 * Math.PI]" ylim="[-3, 3]">
        <ink-chart-eqn eqn="Math.sin(x)"></ink-chart-eqn>
        <ink-chart-eqn :eqn="[
            'x',
            '- (Math.pow(x, 3) / 6)',
            '+ (Math.pow(x, 5) / 120)',
            '- (Math.pow(x, 7) / 5040)',
            '+ (Math.pow(x, 9) / 362880)',
        ].slice(0, ind).join(' ')" stroke-width="2"></ink-chart-eqn>
        <ink-chart-eqn eqn="x" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-eqn eqn="x - (Math.pow(x, 3) / 6)" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-eqn eqn="x - (Math.pow(x, 3) / 6) + (Math.pow(x, 5) / 120)" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-eqn eqn="x - (Math.pow(x, 3) / 6) + (Math.pow(x, 5) / 120) - (Math.pow(x, 7) / 5040)" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-eqn eqn="x - (Math.pow(x, 3) / 6) + (Math.pow(x, 5) / 120) - (Math.pow(x, 7) / 5040) + (Math.pow(x, 9) / 362880)" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
    </ink-chart>
</ink-scope>

<hr>

<h2>Demo</h2>

<ink-scope>
    <ink-var name="p_f_pick" value="5" format=".2"></ink-var>

    <ink-var name="p_f_array" type="Array" value="[0.001, 0.0012, 0.0014, 0.0016, 0.0018, 0.002, 0.0025, 0.003, 0.0035, 0.004, 0.0045, 0.005, 0.0055, 0.006, 0.0065, 0.007, 0.0075, 0.008, 0.0085, 0.009, 0.0095, 0.01, 0.0105, 0.011, 0.0115, 0.012, 0.0125, 0.013, 0.0135, 0.014, 0.0145, 0.015, 0.0155, 0.016, 0.0165, 0.017, 0.0175, 0.018, 0.0185, 0.019, 0.0195, 0.02, 0.025, 0.03, 0.035, 0.04, 0.045, 0.05, 0.055, 0.06, 0.065, 0.07, 0.075, 0.08, 0.085, 0.09, 0.095, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55]"></ink-var>

    <ink-var name="p_f" :value="[0.001, 0.0012, 0.0014, 0.0016, 0.0018, 0.002, 0.0025, 0.003, 0.0035, 0.004, 0.0045, 0.005, 0.0055, 0.006, 0.0065, 0.007, 0.0075, 0.008, 0.0085, 0.009, 0.0095, 0.01, 0.0105, 0.011, 0.0115, 0.012, 0.0125, 0.013, 0.0135, 0.014, 0.0145, 0.015, 0.0155, 0.016, 0.0165, 0.017, 0.0175, 0.018, 0.0185, 0.019, 0.0195, 0.02, 0.025, 0.03, 0.035, 0.04, 0.045, 0.05, 0.055, 0.06, 0.065, 0.07, 0.075, 0.08, 0.085, 0.09, 0.095, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55][p_f_pick]" format=".2%"></ink-var>
    <ink-var name="beta" value="0.85" format=".0%"></ink-var>
    <ink-var name="p_s" :value="1 - p_f"></ink-var>
    <ink-var name="years2fail" :value="1 / p_f" format=".1f"></ink-var>
    <ink-var name="et2fail" :value="Math.log(beta)/Math.log(p_s)" format=".1f"></ink-var>
    <ink-var name="chance_spill" :value="1 - Math.pow(p_s, years2fail)" format=".0%"></ink-var>

    <ink-var-list></ink-var-list>

    <ink-callout class="danger">Variables should be able to choose their type, e.g. array.</ink-callout>
    <ink-callout class="danger">Variables should be able to control their bounds ??</ink-callout>
    <ink-callout class="danger">Max should be overridden with a function <code>:max="p_f_choices.length-1"</code></ink-callout>
    <ink-callout class="danger">Format should be a variable, but should still use the format that is defined. <code>format=".2%" :map="p_f_array[p_f_pick]"</code>, not sure if this is a map, transform, or something else?</ink-callout>
    <ink-callout class="success">Chart types</ink-callout>
    <ink-callout class="success">Spark types, hist, spark line, etc.</ink-callout>

    <p>In order to gain insight into the potential risk of an oil spill, you can play with the parameters below! You can <i>drag</i> the blue highlighted numbers to adjust the interactive graph.</p>

    <p>Let's say the probability of a spill is <ink-dynamic name="p_f_pick" transform="[0.001, 0.0012, 0.0014, 0.0016, 0.0018, 0.002, 0.0025, 0.003, 0.0035, 0.004, 0.0045, 0.005, 0.0055, 0.006, 0.0065, 0.007, 0.0075, 0.008, 0.0085, 0.009, 0.0095, 0.01, 0.0105, 0.011, 0.0115, 0.012, 0.0125, 0.013, 0.0135, 0.014, 0.0145, 0.015, 0.0155, 0.016, 0.0165, 0.017, 0.0175, 0.018, 0.0185, 0.019, 0.0195, 0.02, 0.025, 0.03, 0.035, 0.04, 0.045, 0.05, 0.055, 0.06, 0.065, 0.07, 0.075, 0.08, 0.085, 0.09, 0.095, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55][value]" min="0" max="66" format=".2%"></ink-dynamic> per year (Use <a href="#table1">Table 1</a>). Let's say you are comfortable with a <ink-dynamic name="beta" min="0.01" max="0.99" step="0.01" sensitivity="1000"></ink-dynamic> probability of <i>not</i> having a spill. <b>With your risk tolerance and this probability, the pipeline should not be operated longer than <ink-display name="et2fail"></ink-display> years.</b></p>


    <p>When the probability of a spill is <ink-display name="p_f"></ink-display> the average interval between spills (the return period) as calculated by Northern Gateway is <ink-display name="years2fail"></ink-display> years. <b>At <ink-display name="years2fail"></ink-display> years there is a <ink-display name="chance_spill"></ink-display> chance there has already been an oil spill.</b>
    </p>

    <ink-chart xlim="[0, 550]" xlabel="Years" ylabel="Probability of No Spill">
        <ink-chart-eqn eqn="Math.pow(p_s, x)" stroke="steelblue"></ink-chart-eqn>
        <ink-chart-eqn eqn="0.5" stroke="#333" stroke-dasharray="5" stroke-width="1"></ink-chart-eqn>
        <ink-chart-text x="540" y="0.52" text="Coin Toss"></ink-chart-text>
        <ink-chart-point :x="1/(1-p_s)" :y="Math.pow(p_s, 1/(1-p_s))" fill="black"></ink-chart-point>
        <ink-chart-point :x="et2fail" :y="Math.pow(p_s, et2fail)" fill="red"></ink-chart-point>
    </ink-chart>

</ink-scope>


<ink-scope>
    <h2>Example Charts - Sin Wave</h2>

    <ink-var name="amplitude" value="1"></ink-var>
    <ink-var name="freq" value="1"></ink-var>
    <ink-var name="phase" value="0"></ink-var>

    <strong>Amplitude, $A$:</strong><ink-dynamic name="amplitude" min="-3" max="3" step="0.25"></ink-dynamic><br>
    <strong>Frequency, $f$:</strong><ink-dynamic name="freq" min="0" max="6.28" step="0.2"></ink-dynamic><br>
    <strong>Phase, $\varphi$:</strong><ink-dynamic name="phase" min="-3" max="3" step="0.25"></ink-dynamic><br>

    <ink-equation>
        y(t) = A \sin(2 \pi f t + \varphi)
    </ink-equation>

    <ink-chart :xlim="[0, 2 * Math.PI]" ylim="[-3, 3]" xlabel="t" ylabel="y(t)">
        <ink-chart-eqn eqn="amplitude * Math.sin(2 * Math.PI * freq * x + phase)"></ink-chart-eqn>
        <ink-chart-node x="3" :y="amplitude" bind="{amplitude: y, phase: - 2 * Math.PI * freq * x}"></ink-chart-node>
    </ink-chart>
</ink-scope>

<ink-scope>
    <h2>Example chart - Drag Nodes</h2>

    <ink-var name="a" value="0.5"></ink-var>
    <ink-var name="b" value="0.5"></ink-var>

    <ink-var name="off_x" value="0.5"></ink-var>
    <ink-var name="off_y" value="0.5"></ink-var>



    <strong>$A$:</strong><ink-dynamic name="a" min="-3" max="3" step="0.25"></ink-dynamic><br>
    <strong>$B$:</strong><ink-dynamic name="a" min="-3" max="3" step="0.25"></ink-dynamic><br>
    <strong>$x$:</strong><ink-dynamic name="off_x" min="-1" max="1" step="0.1"></ink-dynamic><br>
    <strong>$y$:</strong><ink-dynamic name="off_y" min="-1" max="1" step="0.1"></ink-dynamic><br>

    <ink-chart xlim="[-3, 3]" ylim="[-3, 3]">
        <ink-chart-node :x="a" :y="b" bind="{a: x, b: y}"></ink-chart-node>
        <ink-chart-node :x="a + off_x" :y="b + off_y" bind="{a: x - off_x, b: y - off_y}"></ink-chart-node>
        <ink-chart-text :x="a" :y="b" text="(a, b)"></ink-chart-text>
        <ink-chart-text :x="a + off_x" :y="b + off_y" text="(a + x, b + y)"></ink-chart-text>
    </ink-chart>

</ink-scope>

<hr>

<ink-scope>

    <h2>ArcTan2</h2>
    <ink-callout class="danger">Periodic boundaries for dynamic.</ink-callout>

    <ink-var name="a" value="0.5"></ink-var>
    <ink-var name="b" value="0.5"></ink-var>
    <ink-var name="r" :value="Math.sqrt(a*a + b*b)"></ink-var>


    <ink-aside><ink-chart xlim="[-5, 5]" ylim="[-5, 5]" height="300" width="300" x-axis-location="origin" y-axis-location="origin">
        <ink-chart-node :x="a" :y="b" bind="{a: x, b: y}"></ink-chart-node>
        <ink-chart-eqn :domain="[0, Math.atan2(b, a)]" eqn="[r * Math.cos(t), r * Math.sin(t)]" parameterize="t" stroke="#333" stroke-width="1" stroke-dasharray="3"></ink-chart-eqn>
        <ink-chart-line :data="[[0, 0],[r * Math.cos(Math.atan2(b, a)), r * Math.sin(Math.atan2(b, a))]]" stroke="#333" stroke-width="1" stroke-dasharray="3"></ink-chart-line>
        <ink-chart-text :x="(r/2) * Math.cos(Math.atan2(b, a) / 2)" :y="(r/2) * Math.sin(Math.atan2(b, a) / 2)" :text="Math.round(Math.atan2(b, a)*180/Math.PI) + '&deg;'"></ink-chart-text>
    </ink-chart></ink-aside>

    <p>
        The function $\operatorname{atan2}(y,x)$ (from "2-argument arctangent") is defined as the angle in the Euclidean plane, given in radians, between the positive x-axis and the ray to the point $(x,y)$.

        $\operatorname{atan2}(y,x)$ returns a single value $\theta$ such that $−\pi < θ \le \pi$ and, for some $r > 0$,

        <ink-equation>\begin{aligned}
            x&=r\cos \theta \\
            y&=r\sin \theta
        \end{aligned}</ink-equation>
    </p>


    <ink-equation :math="'r = \\sqrt{x^2 + y^2} = ' + Math.round(r*100)/100"></ink-equation>


    <strong>$\theta$:</strong><ink-dynamic :value="Math.atan2(b, a) * 180 / Math.PI" bind="{
        a: r * Math.cos(value * Math.PI / 180),
        b: r * Math.sin(value * Math.PI / 180)
    }"
    min="-180" :max="180" step="1" sensitivity="1">&deg;</ink-dynamic><br>
    <strong>$r$:</strong><ink-dynamic :value="Math.sqrt(a*a + b*b)" bind="{
        a: value * Math.cos(Math.atan2(b, a)),
        b: value * Math.sin(Math.atan2(b, a))
    }"
    min="0.1" :max="5" step="0.05" sensitivity="5"></ink-dynamic><br>
    <strong>$x$:</strong><ink-dynamic name="a" min="-5" :max="5" step="0.05" sensitivity="5"></ink-dynamic><br>
    <strong>$y$:</strong><ink-dynamic name="b" min="-5" :max="5" step="0.05" sensitivity="5"></ink-dynamic><br>


    <ink-chart xlim="[-10, 10]" ylim="[-180, 180]" xlabel="y / x" ylabel="atan2(y,x)" x-axis-location="origin" y-axis-location="origin">
        <ink-chart-eqn eqn="Math.atan2(x, 1) * 180/Math.PI"></ink-chart-eqn>
        <ink-chart-eqn eqn="Math.atan2(-x, -1) * 180/Math.PI" :domain="[-Infinity, -0.05]"></ink-chart-eqn>
        <ink-chart-eqn eqn="Math.atan2(-x, -1) * 180/Math.PI" :domain="[0.05, Infinity]"></ink-chart-eqn>
        <ink-chart-eqn eqn="90" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-eqn eqn="-90" stroke="#333" stroke-width="1" stroke-dasharray="1 5"></ink-chart-eqn>
        <ink-chart-text x="4" y="-125" text="x < 0"></ink-chart-text>
        <ink-chart-text x="4" y="55" text="x > 0"></ink-chart-text>
        <ink-chart-text x="-4" y="120" text="x < 0"></ink-chart-text>
        <ink-chart-point :x="b / a" :y="Math.atan2(b, a) * 180/Math.PI" :r="r*5"></ink-chart-point>
    </ink-chart>
</ink-scope>


<ink-scope>
    <h2>Example Charts - Adding Sin and Cos</h2>

    <ink-var name="amplitude1" value="1"></ink-var>
    <ink-var name="freq1" value="1"></ink-var>
    <ink-var name="phase1" value="0"></ink-var>

    <ink-var name="amplitude2" value="1"></ink-var>
    <ink-var name="freq2" value="1"></ink-var>
    <ink-var name="phase2" value="0"></ink-var>

    <h2>Sin</h2>
    <strong>Amplitude, $A$:</strong><ink-dynamic name="amplitude1" min="-3" max="3" step="0.05"></ink-dynamic><br>
    <strong>Frequency, $f$:</strong><ink-dynamic name="freq1" min="0" max="6.28" step="0.05"></ink-dynamic><br>
    <strong>Phase, $\varphi$:</strong><ink-dynamic name="phase1" min="-10" max="10" step="0.05"></ink-dynamic><br>


    <h2>Cos</h2>
    <strong>Amplitude, $A$:</strong><ink-dynamic name="amplitude2" min="-3" max="3" step="0.05"></ink-dynamic><br>
    <strong>Frequency, $f$:</strong><ink-dynamic name="freq2" min="0" max="6.28" step="0.05"></ink-dynamic><br>
    <strong>Phase, $\varphi$:</strong><ink-dynamic name="phase2" min="-10" max="10" step="0.05"></ink-dynamic><br>

    <ink-equation>
        y(t) = A \sin(2 \pi f t + \varphi)
    </ink-equation>

    <ink-chart :xlim="[0, 10]" ylim="[-6, 6]" xlabel="t" ylabel="f(t)">
        <ink-chart-eqn eqn="amplitude1 * Math.sin(2 * Math.PI * freq1 * x + phase1)"></ink-chart-eqn>
        <ink-chart-eqn eqn="amplitude2 * Math.cos(2 * Math.PI * freq2 * x + phase2)"></ink-chart-eqn>
        <ink-chart-eqn eqn="amplitude1 * Math.sin(2 * Math.PI * freq1 * x + phase1) + amplitude2 * Math.cos(2 * Math.PI * freq2 * x + phase2)" stroke-width="2.5"></ink-chart-eqn>
    </ink-chart>
</ink-scope>



<hr>
<h2>Dynamic Content</h2>

<ink-demo>
    <ink-scope name="demoVars">
        <ink-var name="x" value="2"></ink-var>
        <ink-var name="y" value="4"></ink-var>
        <ink-var name="xy" :value="x * y"></ink-var>
        If we have ranges for two variables:<br>
        X: <ink-range name="x"></ink-range>, which is <ink-display name="x"></ink-display><br>
        Y: <ink-range name="y"></ink-range>, which is <ink-display name="y"></ink-display><br>
        Or you can set the value directly in the text for X <ink-dynamic name="x"></ink-dynamic> and Y <ink-dynamic name="y"></ink-dynamic>.<br>
        The product of X and Y is <ink-display name="xy"></ink-display>.
    </ink-scope>
</ink-demo>


<h3>Variables</h3>
<ink-callout class="danger"><strong>TODO:</strong> These should be able to reference a different <code>ink-scope</code></ink-callout>
<ink-callout class="danger"><strong>TODO:</strong> Format should be a default and pulled through to other variables.</ink-callout>


<ink-aside>
    This document has variables:
    <ink-var-list></ink-var-list>
</ink-aside>
<p>
    Variables need to be defined to drive your dynamic document, the <code>ink-var</code> web component can specify a name, description and a value.
</p>

<ink-code language="html" compact>&lt;ink-var name="x" value="1"&gt;&lt;/ink-var&gt;</ink-code>

<p>
    These variables are hidden in the <code>DOM</code>, you can use a <code>ink-var-list</code> to see them all.
</p>

<h3>Reactive Variables</h3>

<p>
    You can also create reactive variables which get execute a user-inputed string in an <code>iframe</code> with access to all other variables. Note here that the <code>:value</code> has a <emph>semi-colon</emph> to show that this should be executed to define the value.
</p>

<ink-code language="html" compact>&lt;ink-var name="xSquared" :value="x * x"&gt;&lt;/ink-var&gt;</ink-code>

<ink-callout class="info">
    Properties of <code>ink-var</code>:
    <dl>
      <dt><code>name</code></dt><dd>The variable to name to in the state, must follow javascript naming conventions for variables.</dd>
      <dt><code>description</code></dt><dd>The variable description, useful for alt-text.</dd>
      <dt><code>value</code></dt><dd>The value of the variable.</dd>
      <dt><code>:value</code></dt><dd>Function to evaluate to update the value. If present, this will update the value anytime the state is changed.</dd>
      <dt><code>format</code></dt><dd>A d3-format string. See the <a href="https://github.com/d3/d3-format" target="_blank">documentation</a>.</dd>
    </dl>
</ink-callout>

<hr class="small">

<h3>Display Variables</h3>

<p>To display an element create an <code>ink-display</code>, which will just render the named variable as text.</p>

<ink-code language="html" compact>&lt;ink-display name="x"&gt;&lt;/ink-display&gt;</ink-code>

<p>
    This is a number that is dynamic: <ink-display name="x"></ink-display>.<br>
    Try setting the value of $x$ with the range input: <ink-range name="x" max="5"></ink-range>
</p>

<p>
    You can also <code>transform</code> the value of a variable before you format it.
    For example, you might want to say that the admission to a park is <code>'free'</code> when the <code>value == 0</code>.
</p>
<ink-demo>
    The park admission is
    <ink-display name="x" transform="(value > 0)? value : 'free'" format="$.2f"></ink-display>.
</ink-demo>
<p>
    You can also use this <code>transform</code> to say that the park admission is <strong><ink-dynamic name="x" format="$.2f" transform="['free','real cheap','cheap','costly','expensive','real expensive'][Math.min(Math.max(value,0),5)]" max="5"></ink-dynamic></strong>.<br>
    This is also quite useful if you want to use the transform to index into an array <ink-dynamic name="x" format="$.2f" transform="['😍','😆','😊','😐','😒','😠'][Math.min(Math.max(value,0),5)]" max="5"></ink-dynamic>, in this case emoji array - but it could be numeric too!
</p>

<ink-callout class="info">
    Properties of <code>ink-display</code>:
    <dl>
      <dt><code>name</code></dt><dd>The variable to name to in the state.</dd>
      <dt><code>format</code></dt><dd>A d3-format string. See the <a href="https://github.com/d3/d3-format" target="_blank">documentation</a>.</dd>
      <dt><code>transform</code></dt><dd>Allows you to change or transform the value before formating: <code>format(transform(value))</code>. If the value is a string after transformation, it will not be formatted.</dd>
    </dl>
</ink-callout>

<hr class="small">

<h3>Controlling Variables</h3>

<p>What gets slightly more exciting is when you can bring these together with inputs that can be ranges or dynamic text elements that you can drag.</p>

<ink-code language="html" compact>&lt;ink-dynamic name="x"&gt;&lt;/ink-dynamic&gt;</ink-code>

<p>
    This allows you to set the value of $x$ inline: <ink-dynamic name="x"></ink-dynamic> or $y=$<ink-dynamic name="y"></ink-dynamic>.<br>
    Notice how it is linked to the above <code>ink-range</code> and <code>ink-display</code>.<br>
    You can also add inside of the html tag, to have custom formatting that also is dynamic.<br>
    For example, <ink-dynamic name="y">ºC</ink-dynamic>, the <code>ºC</code> is inside of the <code>&lt;ink-dynamic&gt;</code> tags, so it is also has a blue underline.
</p>
<p>
    You can also create ranges, as see above, notice that we can create a lot of these and name to different values.
</p>

<ink-code language="html" compact>&lt;ink-range name="x"&gt;&lt;/ink-range&gt;</ink-code>
<p>
    $x_{1.0}:$ <ink-range name="x"></ink-range><br>
    $y_{1.0}:$ <ink-range name="y"></ink-range><br>
    $y_{0.5}:$ <ink-range name="y" step="0.5"></ink-range><br>
</p>


<ink-callout class="info">
    <strong>Properties:</strong>
    <dl>
        <dt><code>name</code></dt><dd>The variable to name to in the state, setting this will set <code>:value="name"</code> and <code>bind="{name:value}"</code>.</dd>
        <dt><code>value</code></dt><dd>The numeric value of the control. Can also be set by <code>:value</code>.</dd>
        <dt><code>bind</code></dt><dd>A dictionary that should set variables: <code>(value) => {x: value}</code>.</dd>
        <dt><code>format</code></dt><dd>A d3-format string. See the <a href="https://github.com/d3/d3-format" target="_blank">documentation</a>.</dd>
        <dt><code>min</code></dt><dd>Minimum of the range.</dd>
        <dt><code>max</code></dt><dd>Maximum of the range.</dd>
        <dt><code>step</code></dt><dd>Step size.</dd>
        <dt><code>sensitivity</code></dt><dd>Multiplier on pixels dragged for the <code>dynamic</code> text input.</dd>
        <dt><code>transform</code></dt><dd>Allows you to change or transform the value before formating: <code>format(transform(value))</code>. If the value is a string after transformation, it will not be formatted.</dd>
    </dl>
</ink-callout>

<hr class="small">

<h2><code>name</code>, <code>bind</code> & <code>:value</code></h2>

<p>

    There are times where you want more control over how your data gets displayed, updated or informs other variables.
    There are three properties to consider: <code>name</code>, <code>:value</code>, and <code>bind</code>.
    The most common use is through the <code>name</code> property, which is used to both set the control's value, and bind the change to the named variable.
    This amounts to a <strong>two way connection</strong>:

    <ink-code language="html">
        &lt;ink-dynamic
            name="x"
        &gt;&lt;/ink-dynamic&gt;
    </ink-code>

    When the variable <code>x</code> updates, the <code>value</code> is set, and when the control updates the value, the result updates the variable!
    Under the hood, when <code>name</code> is defined, the <code>:value</code> and the <code>bind</code> functions are automatically set.

    <ink-code language="html">
        &lt;ink-dynamic
            :value="x"
            bind="{x: value}"
        &gt;&lt;/ink-dynamic&gt;
    </ink-code>

    As with other properties, the <code>:</code> syntax for the <code>value</code> property recomputes every time there is a change.
    For example, if you put <code>:value="x"</code> then anytime the variable <code>x</code> changes, the value of the control updates.
    <strong>However, this is not the case in reverse!</strong>
    You have to explicitly <code>bind</code> the control to the variable (or variables) you want to update. This is done using a JSON dictionary of the form <code>{variable: value}</code>.
    Note that you can update multiple variables at a time.

    If you choose to explicitly set these, and not just use the <code>name</code> property, you can do some interesting things!
</p>

<ink-scope>
    <ink-var name="a" value="1"></ink-var>
    <ink-var name="b" value="1"></ink-var>

    <h3>Coordinate Transformation</h3>
    <p>
        A good example of this is changing from a radial coordinate system to Cartesian. In this case we will have two variables:
        <ink-chart style="float:right" xlim="[-5, 5]" ylim="[-5, 5]" height="300" width="300" x-axis-location="origin" y-axis-location="origin">
            <ink-chart-node :x="a" :y="b" bind="{a: x, b: y}"></ink-chart-node>
        </ink-chart>
        <br>

        <strong>Cartesian Coordinate System</strong>
        <dl>
            <dt>$x$</dt><dd><ink-dynamic name="a" min="-5" :max="5" step="0.05" sensitivity="5"></ink-dynamic></dd>
            <dt>$y$</dt><dd><ink-dynamic name="b" min="-5" :max="5" step="0.05" sensitivity="5"></ink-dynamic></dd>
        </dl>
        <br>
        <strong>Radial Coordinate System</strong>
        <dl>
            <dt>$r$</dt><dd>
                <ink-dynamic :value="Math.sqrt(a*a + b*b)" bind="{
                    a: value * Math.cos(Math.atan2(b, a)),
                    b: value * Math.sin(Math.atan2(b, a))
                }"
                min="0.1" :max="5" step="0.05" sensitivity="5"></ink-dynamic>
            </dd>
            <dt>$\theta$</dt><dd>
                <ink-dynamic :value="Math.atan2(b, a) * 180 / Math.PI" bind="{
                    a: Math.sqrt(a*a + b*b) * Math.cos(value * Math.PI / 180),
                    b: Math.sqrt(a*a + b*b) * Math.sin(value * Math.PI / 180)
                }"
                min="-180" :max="180" step="1" sensitivity="1">&deg;</ink-dynamic>
            </dd>
        </dl>
    </p>

    <strong style="text-decoration: underline;">Cartesian Update</strong>
    <p>
        <ink-equation :math="'\\begin{aligned}x &= x = ' + Math.round(a * 10)/10 + '\\\\ y &= y = ' + Math.round(b * 10)/10 + '\\end{aligned}'"></ink-equation>

        <ink-code language="html">
            &lt;ink-dynamic name="x"&gt;&lt;/ink-dynamic&gt;
        </ink-code>

        This gets rewritten and is equivalent to:

        <ink-code language="html">
            &lt;ink-dynamic :value="x" bind="{
                x: value
            }"&gt;&lt;/ink-dynamic&gt;
        </ink-code>
    </p>

    <strong style="text-decoration: underline">Radius Update</strong>
    <ink-equation :math="'\\begin{aligned}r &= \\sqrt{x^2 + y^2} = ' + Math.round(Math.sqrt(a*a + b*b) * 10)/10 + '\\\\ x &= r * \\cos(\\operatorname{atan2}(y, x)) = ' + Math.round(a * 10)/10 + '\\\\ y &= r * \\sin(\\operatorname{atan2}(y, x)) = ' + Math.round(b * 10)/10 + '\\end{aligned}'"></ink-equation>

    <ink-code>
        &lt;ink-dynamic :value="Math.sqrt(x*x + y*y)" bind="{
            x: value * Math.cos(Math.atan2(y, x)),
            y: value * Math.sin(Math.atan2(y, x))
        }"&gt;&lt;/ink-dynamic&gt;
    </ink-code>

    <strong style="text-decoration: underline">Theta Update</strong>
    <ink-equation :math="'\\begin{aligned}\\theta &= \\operatorname{atan2}(y, x) = ' + Math.round(Math.atan2(b, a) * 180 / Math.PI * 10) / 10 + '\\\\ x &= \\sqrt{x^2 + y^2} * \\cos( \\theta ) = ' + Math.round(a * 10)/10 + '\\\\ y &= \\sqrt{x^2 + y^2} * \\sin( \\theta ) = ' + Math.round(b * 10)/10 + '\\end{aligned}'"></ink-equation>
    <ink-code>
        &lt;ink-dynamic :value="Math.atan2(y, x)" bind="{
            x: Math.sqrt(x*x + y*y) * Math.cos(value),
            y: Math.sqrt(x*x + y*y) * Math.sin(value)
        }"&gt;&lt;/ink-dynamic&gt;
    </ink-code>




    </p>
</ink-scope>
<hr>

<h2>Text Content</h2>

<h3>Equations</h3>

<ink-demo>
    <ink-equation>
        x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}
    </ink-equation>
</ink-demo>

<p>Use the <code>eqn.math</code> property to change the math dynamically:</p>

<ink-demo>
    <ink-scope>
    <ink-var name="index" value="1"></ink-var>
    Drag me to expand the Taylor Series: <ink-range name="index" min="1" max="4"></ink-range>
    <ink-equation :math="[
            'f(x) \\approx f(a)',
            '\\frac {f\'(a)}{1!} (x-a)',
            '\\frac{f\'\'(a)}{2!} (x-a)^2',
            '\\frac{f^{(3)}(a)}{3!}(x-a)^3'
        ].slice(0, index).join(' + ') + ' + \\cdots'"></ink-equation>
    </ink-scope>
</ink-demo>



<h3>Code and demos</h3>

<ink-demo>
    <ink-code language="python">
        &gt;&gt;&gt; import numpy as np
        &gt;&gt;&gt; a = np.arange(15).reshape(3, 5)
        &gt;&gt;&gt; a
        array([[ 0,  1,  2,  3,  4],
               [ 5,  6,  7,  8,  9],
               [10, 11, 12, 13, 14]])
    </ink-code>
</ink-demo>

<p>Most of the content on this page uses the <code>&lt;ink-demo&gt;</code> component:</p>

<ink-demo>
    <ink-demo>
        <p>This is a demo of a demo!!</p>
    </ink-demo>
</ink-demo>



<h3>Figures</h3>

<ink-demo>
    <ink-figure img-src="https://raw.githubusercontent.com/simpeg/tle-finitevolume/master/images/FiniteVolume.png">
      Setup of a DC resistivity survey.
    </ink-figure>
</ink-demo>


<h3>Asides</h3>
<p>
    Ink has <a href="https://edwardtufte.github.io/tufte-css/" target="_blank">Tufte style sidenotes</a> to add sarcastic or poignant insights.
    These asides can include figures and equations.
</p>

<ink-demo>
    <p>
        Sometimes you need to say things on the side.
        <ink-aside>
            Which is over here!
        </ink-aside>
    </p>
</ink-demo>


<ink-demo>
    <ink-callout class="danger">
        <strong>Warning</strong>: This may get peoples attention.
    </ink-callout>
</ink-demo>



<h3>Tiles</h3>

    <ink-card title="Website Redesign or a Really Long Title" description="Some ideas about the scholarly commons." img-src="http://localhost:8080/images/website/life.png" url="/on-my-website-2018" date="2018"></ink-card>

    And this is just text.
</ink-article>
</body>
</html>
