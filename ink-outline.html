<dom-module id="ink-outline">
  <template>
    <style>
      #outline{
        position: fixed;
        top:50vh;
        left:0;
        width: 30px;
        z-index: 100;
        transform: translateY(-50%);
        overflow: hidden;
        transition: all 200ms;
      }
      .header{
        position: relative;
      }
      .text{
        font-size: 12px;
        line-height: 2em;
        width: 150px;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        opacity: 0;
        transition: all 200ms;
        transition-timing-function: cubic-bezier(0, 0.58, 0.55, 1.36);
      }
      .tick{
        position: absolute;
        left: 0px;
        top: 9px;
        border-bottom: 1px solid #AAA;
        height: 1px;
        transition: all 200ms;
      }
      .header:hover .tick{
        border-bottom: 2px solid #F49B32;
      }
      .header:first-of-type{
        text-decoration: underline;
        font-size: 13px;
      }
      .header:hover{
        color: #F49B32;
        cursor: pointer;
      }
      #outline:hover{
        width: 200px;
        background: linear-gradient(to right, white, transparent);
      }
      #outline:hover .text{
        opacity: 1;
        margin-left: -23px;
      }
      #outline:hover .tick{
        left: -30px;
      }
    </style>
    <div id='outline'>
      <template is="dom-repeat" items="[[ headers ]]" as="header">
          <div class="header"
               on-click="handleClick"
               style="
                      padding-left:calc(28px + {{ header.level }}px*5);
                      font-weight: calc(700 - {{ header.level }}*100);
               "
               title="{{ header.title }}">
            <div class="tick" style="width:calc(25px - {{ header.level }}px*5);">&nbsp;</div>
            <div class="text">{{ header.title }}</div>
          </div>
        </template>
    </div>
  </template>

  <script>
    class InkOutline extends Polymer.Element {
      static get is() { return 'ink-outline'; }
      static get properties(){
        return {
          headers:{
            type: Object,
            value: []
          }
        };
      }
      handleClick(e){
        document.getElementById(e.model.header.id).scrollIntoView({behavior:'smooth', block: "start", inline: "nearest"});
      }
    }
    window.customElements.define(InkOutline.is, InkOutline);
  </script>
</dom-module>
